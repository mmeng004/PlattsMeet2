{% extends "base.html" %}
{% load static %} 
{% block content %} 
  {% if query %}
    <h1>Students from "{{ query }}"</h1>
    <h3>
      {% with results.count as total_results %}
        Found {{ total_results }} user{{ total_results|pluralize }}
      {% endwith %}
    </h3>
    {% for profiles in results %}
      <h4>
        <a>
          Username:{{ profiles.user }}
        </a>
      </h4>
    {% empty %}
      <p>There are no results for your query.</p>
    {% endfor %}
    <div>
      <form onsubmit="return executeQuery();">
          <input type="text" name="q" id="id_q_large" placeholder="Type in username">
      </form>
    </div>
  
    <p><a href="{% url "profile:searchbyhometown" %}">Search again</a></p>
  {% else %}
    <h1>Search by Country</h1>
    <form method="get">
      {{ form.as_p }}
      <input type="submit" value="Search">
    </form>
  {% endif %}

  <script type="text/javascript">
    function executeQuery() {
        var query = ""
        if (query == ""){
            query = document.getElementById('id_q_large').value;
        }
        window.location.replace("{% url 'search' %}?q=" + query)
        return false
    }
  </script>
{% endblock content %}